<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="SectorMapQuest.Views.MainPage"
    BackgroundColor="#121212"
    NavigationPage.HasNavigationBar="False">

    <Grid RowDefinitions="Auto,*,Auto">

        <!-- ================= TOP BAR ================= -->
        <Grid Grid.Row="0"
              Padding="16"
              ColumnDefinitions="Auto,*,Auto">

            <!-- BACK (Ð¡Ð”Ð’Ð˜ÐÐ£Ð¢Ð Ð’Ð’Ð•Ð Ð¥) -->
            <Grid Margin="0,0,0,0">
                <Label x:Name="BackButton"
                       Text="â†"
                       FontSize="28"
                       TextColor="White"
                       IsVisible="False">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnBackClicked"/>
                    </Label.GestureRecognizers>
                </Label>
            </Grid>

            <!-- TITLE -->
            <Label Grid.Column="1"
                   Text="SectorMapQuest"
                   FontSize="18"
                   TextColor="White"
                   VerticalOptions="Center"
                   HorizontalOptions="Center"/>

            <!-- SETTINGS -->
            <Label Grid.Column="2"
                   Text="âš™"
                   FontSize="24"
                   TextColor="White"
                   VerticalOptions="Center">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnSettingsClicked"/>
                </Label.GestureRecognizers>
            </Label>

        </Grid>

        <!-- ================= CONTENT + POPUP ================= -->
        <Grid Grid.Row="1">

            <!-- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ† -->
            <ContentView x:Name="PageHost"/>

            <!-- POPUP -->
            <Frame x:Name="SectorPopup"
                   IsVisible="False"
                   BackgroundColor="#AA000000"
                   Padding="20"
                   CornerRadius="16"
                   HorizontalOptions="Center"
                   VerticalOptions="Center">

                <VerticalStackLayout Spacing="12">
                    <Label Text="ÐÐ¾Ð²Ñ‹Ð¹ ÑÐµÐºÑ‚Ð¾Ñ€ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚!"
                           FontSize="20"
                           TextColor="White"
                           HorizontalOptions="Center"/>

                    <Button Text="ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ"
                            Clicked="OnPopupClosed"/>
                </VerticalStackLayout>

            </Frame>

        </Grid>

        <!-- ================= BOTTOM BAR ================= -->
        <Border Grid.Row="2"
                x:Name="BottomBar"
                BackgroundColor="#1F1F1F"
                StrokeThickness="0"
                Padding="10"
                StrokeShape="RoundRectangle 24">

            <Grid ColumnDefinitions="*,*,*,*">

                <VerticalStackLayout Grid.Column="0" HorizontalOptions="Center">
                    <VerticalStackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnMapClicked"/>
                    </VerticalStackLayout.GestureRecognizers>
                    <Label Text="ðŸ—º" FontSize="22"/>
                    <Label Text="Map" FontSize="12" TextColor="Gray"/>
                </VerticalStackLayout>

                <VerticalStackLayout Grid.Column="1" HorizontalOptions="Center">
                    <VerticalStackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnFeedTapped"/>
                    </VerticalStackLayout.GestureRecognizers>
                    <Label Text="ðŸ“°" FontSize="22"/>
                    <Label Text="Feed" FontSize="12" TextColor="Gray"/>
                </VerticalStackLayout>

                <VerticalStackLayout Grid.Column="2" HorizontalOptions="Center">
                    <VerticalStackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnStatsTapped"/>
                    </VerticalStackLayout.GestureRecognizers>
                    <Label Text="ðŸ“Š" FontSize="22"/>
                    <Label Text="Stats" FontSize="12" TextColor="Gray"/>
                </VerticalStackLayout>

                <VerticalStackLayout Grid.Column="3" HorizontalOptions="Center">
                    <VerticalStackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnProfileTapped"/>
                    </VerticalStackLayout.GestureRecognizers>
                    <Label Text="ðŸ‘¤" FontSize="22"/>
                    <Label Text="Profile" FontSize="12" TextColor="Gray"/>
                </VerticalStackLayout>

            </Grid>
        </Border>

    </Grid>
</ContentPage>